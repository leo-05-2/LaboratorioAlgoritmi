%! Author = leo
%! Date = 16/10/25

% Preamble
\section{Test effettuati}
Sono stati effettuati due test principali per valutare le prestazioni delle tre strutture dati (\texttt{LinkedList}, \texttt{BSTree} senza \texttt{size}, \texttt{SBSTree} con \texttt{size}) nelle operazioni di \texttt{select} e \texttt{rank}.
Di seguito sono descritti i test e i risultati ottenuti, con relativi andamenti sia singoli che comparativi.
\\
Per i test i valori dei parametri della classe Tester sono stati scelti come segue:
\begin{itemize}
  \item  \texttt{warmup\_calls}: 20
  \item  \texttt{datasets\_per\_n}: 10
  \item  \texttt{count}: 120
  \item  \texttt{calls\_per\_test}: 30
\end{itemize}

\subsection{Risultati dei test}
Di seguito verranno mostrati i risultati per ogni test effettuato con le relative considerazioni.

\subsubsection{Test 1: Dati Casuali}

% Prima immagine (placeholder -> sostituita con rank_performance)
%\noindent\makebox[\textwidth][c]{%
%  \begin{minipage}{0.7\textwidth}\centering
%    \includegraphics[width=\linewidth]{path/to/your/placeholder_image}
%    \captionof{figure}{Rank performance (overview)}\label{fig:rank_performance_overview}
%  \end{minipage}%
%}


%todo: aggiungere tabelle e controllare che tutte le immagini siano citate e abbiano una didascalia

\begin{figure}[H]
  \centering
  \begin{minipage}{\textwidth}\centering
    \includegraphics[width=\linewidth]{../src/png/rank_performance_LinkedList_random}
    \caption{prestazioni Rank - LinkedList (random)}\label{fig:rank_ll_rand}
  \end{minipage}
\end{figure}

\\
\begin{figure}[H]
  \centering
  \begin{minipage}{\textwidth}\centering
    \includegraphics[width=\linewidth]{../src/png/select_performance_LinkedList_random}
    \caption{prestazioni Select - LinkedList (random)}\label{fig:select_ll_rand}
  \end{minipage}
\end{figure}

\\
\\
\texttt{LinkedList}: O(n), lineare come previsto sia per select \ref{fig:rank_ll_rand} che per rank \ref{fig:select_ll_rand}.
\\\\
\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/rank_performance_BSTree_random}
  \caption{Rank - BSTree (random)}\label{fig:rank_bst_rand}
\end{minipage}
  \end{figure}
\\
\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/select_performance_BSTree_random}
  \caption{Select - BSTree (random)}\label{fig:select_bst_rand}
\end{minipage}%
\end{figure}

\\
\\
Anche se i dati casuali producono mediamente un albero bilanciato con $h\approx\log n$, l'assenza di \texttt{size} costringe gli algoritmi select/rank a visitare/contare elementi.
Risultato empirico atteso: le curve di tempo crescono linearmente con $n$ \ref{fig:rank_bst_rand},\ref{fig:select_bst_rand}, similmente a LinkedList (con costanti diverse).

\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/rank_performance_SBStree_random}
  \caption{Rank - SBSTree (random)}\label{fig:rank_sbst_rand}
\end{minipage}
    \end{figure}
\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/select_performance_SBStree_random}
  \caption{Select - SBSTree (random)}\label{fig:select_sbst_rand}
\end{minipage}%
\end{figure}

\\\\\\
SBSTree: $O(\log n)$ come si vede da \ref{fig:rank_sbst_rand} e \ref{fig:select_sbst_rand}— grazie al bilanciamento AVL e all'attributo \texttt{size}.
\\\\\\
% Grafico comparativo

\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/rank_performance_LinkedList_BSTree_SBStree_random}
  \caption{Confronto Rank (random)}\label{fig:rank_cmp_rand}
\end{minipage}
  \end{figure}

\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/select_performance_LinkedList_BSTree_SBStree_random}
  \caption{Confronto Select (random)}\label{fig:select_cmp_rand}
\end{minipage}%
\end{figure}

\\\\\\
Conseguenza: il test dovrebbe mostrare che LinkedList e BSTree hanno prestazioni comparabili (entrambe $O(n)$), mentre SBSTree è nettamente migliore ($O(\log n)$).
\\\\\\
\input{./components/tabella_risultati_random}
\\
Come si vede dalla tabella \ref{tab:random} e dai grafici comparativi \ref{fig:rank_cmp_rand}, \ref{fig:select_cmp_rand} i risultati confermano le aspettative teoriche:
\begin{itemize}
 \textbf{LinkedList e BSTree}: Come previsto dalla teoria, entrambe le strutture mostrano un tempo di esecuzione che cresce linearmente (O(n)) con la dimensione dell'input. Le loro curve di prestazioni sono quasi sovrapponibili, con il BSTree che mostra una costante leggermente più alta (pendenza maggiore) a causa dell'overhead della gestione della struttura ad albero rispetto alla semplice iterazione della lista.\\
 \textbf{SBSTree}: Mostra prestazioni nettamente superiori. La sua curva è quasi piatta, confermando la complessità logaritmica (O(log n)). Il tempo di esecuzione cresce molto lentamente e non è quasi influenzato dall'aumento di $n$.
\end{itemize}


\subsubsection{Test 2: Dati Ordinati (Albero BSTree Degenere)}

% LinkedList ordinato - affiancate
\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/rank_performance_LinkedList_sorted}
  \caption{Rank - LinkedList (ordinato)}\label{fig:rank_ll_sorted}
\end{minipage}
  \end{figure}
\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/select_performance_LinkedList_sorted}
  \caption{Select - LinkedList (ordinato)}\label{fig:select_ll_sorted}
\end{minipage}%
\end{figure}


LinkedList: O(n) (lineare) simile al test precedente, dato che la lista mantiene la stessa struttura indipendentemente dall'ordine di inserimento \ref{fig:rank_ll_sorted}, \ref{fig:select_ll_sorted}.

% BSTree ordinato
\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/rank_performance_BSTree_sorted}
  \caption{Rank - BSTree (ordinato)}\label{fig:rank_bst_sorted}
\end{minipage}
    \end{figure}\\
\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/select_performance_BSTree_sorted}
  \caption{Select - BSTree (ordinato)}\label{fig:select_bst_sorted}
\end{minipage}%
\end{figure}


BSTree (degenere): O(n) simile al test precedente \ref{fig:rank_bst_sorted}, \ref{fig:select_bst_sorted}.

\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/rank_performance_SBStree_sorted}
  \caption{Rank - SBSTree (ordinato)}\label{fig:rank_sbst_sorted}
\end{minipage}
    \end{figure}\\
\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/select_performance_SBStree_sorted}
  \caption{Select - SBSTree (ordinato)}\label{fig:select_sbst_sorted}
\end{minipage}%
\end{figure}


SBSTree: $O(\log n)$ — bilanciamento AVL mantiene $h=O(\log n)$, \ref{fig:rank_sbst_sorted}, \ref{fig:select_sbst_sorted}.

\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/rank_performance_LinkedList_BSTree_SBStree_sorted}
  \caption{Confronto Rank (ordinato)}\label{fig:rank_cmp_sorted}
\end{minipage}
    \end{figure}
\begin{figure}[H]
  \centering
\begin{minipage}{\textwidth}\centering
  \includegraphics[width=\linewidth]{../src/png/select_performance_LinkedList_BSTree_SBStree_sorted}
  \caption{Confronto Select (ordinato)}\label{fig:select_cmp_sorted}
\end{minipage}%
\end{figure}


\\
\input{./components/tabella_risultati_sorted}

Come si vede dalla tabella \ref{tab:sorted} e dai grafici comparativi \ref{fig:rank_cmp_sorted}, \ref{fig:select_cmp_sorted} i risultati
confermano le aspettative teoriche:
\\
\textbf{LinkedList e BSTree}: in questo scenario, il \textbf{BSTree} degenera in una lista.\\
\textbf{SBSTree}: grazie al meccanismo di autobilanciamento AVL, la struttura non degenera, mantiene un'altezza logaritmica e le sue prestazioni per select e rank rimangono \textbf{O(log n)}, come evidenziato dalla curva piatta nei grafici.
\\